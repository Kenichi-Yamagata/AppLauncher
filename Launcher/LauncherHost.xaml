<Window x:Class="Launcher.LauncherHost"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Launcher"
        mc:Ignorable="d"
        WindowStyle="None"
        ShowInTaskbar="False"
        AllowsTransparency="True"
        Background="Transparent" >
    <!-- 
    ランチャーのホストウインドウ
    このウインドウは実際には表示されずアクティブになるとコンテクストメニューを表示し、
    非アクティブになるとコンテクストメニューを閉じる動作をする 
    -->
    <Window.ContextMenu>
        <!-- ランチャーのメインメニュー -->
        <ContextMenu x:Name="LauncherMainMenu"
                ItemsSource="{Binding Children}"
                Grid.IsSharedSizeScope="True"
                StaysOpen="False"
                >
            <ContextMenu.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="0,4">
                        <!--
                            <Behaviors:Interaction.Triggers>
                                <Behaviors:EventTrigger EventName="MouseRightButtonDown">
                                    <Behaviors:InvokeCommandAction 
                                        Command="{Binding DoubleClickCommand}" 
                                        CommandParameter="{Binding}"/>
                                </Behaviors:EventTrigger>
                                <Behaviors:KeyTrigger Modifiers="Control" Key="O" FiredOn="KeyDown">
                                    <Behaviors:InvokeCommandAction 
                                        Command="{Binding DoubleClickCommand}"
                                        CommandParameter="{Binding}"
                                        />
                                </Behaviors:KeyTrigger>
                            </Behaviors:Interaction.Triggers>
                            -->
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="16"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <!-- アイコン -->
                        <Image Grid.Column="0" Source="{Binding IconSource}" 
                                Width="16" Height="16" Stretch="Uniform" 
                                VerticalAlignment="Center" HorizontalAlignment="Left"
                                Margin="4,0" />
                        <!-- テキスト -->
                        <TextBlock Grid.Column="1" Text="{Binding DisplayName}" 
                                VerticalAlignment="Center" HorizontalAlignment="Left"
                                Margin="4,0" 
                                Foreground="Black"/>
                    </Grid>
                </DataTemplate>
            </ContextMenu.ItemTemplate>
            <ContextMenu.ItemContainerStyle>
                <Style TargetType="{x:Type MenuItem}">
                    <Setter Property="ItemsSource" Value="{Binding Children}" />
                    <Setter Property="IsChecked" Value="{Binding IsSelected}"/>
                    <Setter Property="Command" Value="{Binding ExecuteCommand}" />
                </Style>
            </ContextMenu.ItemContainerStyle>
        </ContextMenu>
    </Window.ContextMenu>

    <Grid>
    </Grid>
</Window>
